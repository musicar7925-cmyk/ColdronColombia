<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brief Operativo | Coldron Colombia</title>

  <!-- Paleta Coldron (antes de Tailwind) -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            coldron: {
              50:  "#fbf6ee",
              100: "#f3eadc",
              200: "#e6d6bf",
              300: "#d3bb97",
              400: "#b88955",
              500: "#9a5a21",
              600: "#7c4318",
              700: "#5a2f10",
              800: "#3f220b",
              900: "#2b1706",
              950: "#1c0f04"
            },
            accent: "#ff4d12"
          }
        }
      }
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- html2pdf (Descargar PDF directo) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    @media print {
      .no-print { display: none !important; }
      #printArea { display: block !important; }
      body { background: #fff !important; }
      .avoid-break { break-inside: avoid; page-break-inside: avoid; }
      .page-break { break-before: page; page-break-before: always; }
      @page { size: A4; margin: 12mm; }
    }
  </style>
</head>

<body class="bg-coldron-50 text-coldron-950">
  <!-- HEADER -->
  <header class="no-print sticky top-0 z-20 border-b border-coldron-200 bg-coldron-50/90 backdrop-blur">
    <div class="mx-auto max-w-6xl px-4 py-4">
      <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
        <div class="flex items-center gap-3">
          <!-- Logo Coldron (si quieres PDF perfecto, súbelo al repo como logo.png y cambia src="logo.png") -->
          <img
            id="brandLogo"
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-jAnp9C1mhpW1RVtR_MGWwnQLJGGf9Qg0Uw&s"
            alt="Coldron Colombia"
            class="h-10 w-auto"
            referrerpolicy="no-referrer"
            crossorigin="anonymous"
            onerror="this.style.display='none'"
          />
          <div>
            <h1 class="text-xl font-bold tracking-tight text-coldron-950">Coldron Colombia</h1>
            <p class="text-sm text-coldron-700">Brief profesional para operación de contenidos, ventas y voceros.</p>
          </div>
        </div>

        <div class="flex items-center gap-3">
          <span class="rounded-xl border border-coldron-200 bg-coldron-100 px-3 py-2 text-xs text-coldron-700">
            Borrador local: <span class="font-semibold text-coldron-950" id="saveStatus">listo</span>
          </span>
          <button type="button"
                  class="rounded-xl bg-coldron-100 px-3 py-2 text-sm font-semibold text-coldron-950 hover:bg-coldron-200"
                  onclick="resetDraft()">
            Reiniciar
          </button>
        </div>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 py-6">
    <!-- ALERT -->
    <div id="alertBox" class="no-print mb-5 hidden rounded-2xl border border-rose-200 bg-rose-50 p-4">
      <div class="flex items-start justify-between gap-4">
        <div>
          <div class="font-semibold text-rose-900">Faltan datos obligatorios</div>
          <p class="mt-1 text-sm text-rose-800">Completa lo siguiente para generar el resumen.</p>
        </div>
        <button type="button"
                class="rounded-xl bg-white px-3 py-1.5 text-sm font-semibold text-rose-900 ring-1 ring-rose-200 hover:bg-rose-100"
                onclick="hideAlert()">Cerrar</button>
      </div>
      <ul id="missingList" class="mt-3 list-disc space-y-1 pl-5 text-sm text-rose-900"></ul>
    </div>

    <!-- FORM VIEW -->
    <section id="formView" class="no-print grid gap-6">
      <!-- 1) Datos -->
      <section class="rounded-3xl border border-coldron-200 bg-white p-6 shadow-sm">
        <div class="flex flex-col gap-1">
          <h2 class="text-lg font-bold text-coldron-950">1) Datos del CDA</h2>
          <p class="text-sm text-coldron-700">Información base para ubicación, confianza y CTA.</p>
        </div>

        <div class="mt-6 grid gap-4 sm:grid-cols-2">
          <div>
            <label class="text-sm font-semibold text-coldron-900">Nombre del CDA (comercial) <span class="text-rose-600">*</span></label>
            <input id="cdaName" data-required="true" data-label="Nombre del CDA"
                   class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm"
                   placeholder="Ej: CDA La 13" />
          </div>
          <div>
            <label class="text-sm font-semibold text-coldron-900">Razón social <span class="text-rose-600">*</span></label>
            <input id="legalName" data-required="true" data-label="Razón social"
                   class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm"
                   placeholder="Ej: CDA LA 13 S.A.S." />
          </div>

          <div>
            <label class="text-sm font-semibold text-coldron-900">NIT <span class="text-rose-600">*</span></label>
            <input id="nit" data-required="true" data-label="NIT"
                   class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm"
                   placeholder="Ej: 900123456-7" />
          </div>
          <div>
            <label class="text-sm font-semibold text-coldron-900">WhatsApp oficial <span class="text-rose-600">*</span></label>
            <input id="whatsapp" data-required="true" data-label="WhatsApp oficial"
                   class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm"
                   placeholder="Ej: +57 300 123 4567" />
          </div>

          <div class="sm:col-span-2">
            <label class="text-sm font-semibold text-coldron-900">Dirección + Localidad + Barrio <span class="text-rose-600">*</span></label>
            <input id="address" data-required="true" data-label="Dirección/Localidad/Barrio"
                   class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm"
                   placeholder="Ej: Cra XX #XX-XX, Puente Aranda, Barrio X" />
          </div>

          <div>
            <label class="text-sm font-semibold text-coldron-900">Link Google Maps (recomendado)</label>
            <input id="maps" class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm"
                   placeholder="https://maps.app.goo.gl/..." />
          </div>
          <div>
            <label class="text-sm font-semibold text-coldron-900">Horarios <span class="text-rose-600">*</span></label>
            <input id="hours" data-required="true" data-label="Horarios"
                   class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm"
                   placeholder="Ej: Lun–Sáb 7:00–17:00" />
          </div>
        </div>
      </section>

      <!-- 2) Operación y ventas -->
      <section class="rounded-3xl border border-coldron-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-bold text-coldron-950">2) Operación, servicios y ventas</h2>
        <p class="mt-1 text-sm text-coldron-700">Cómo atienden, qué venden y qué los hace diferentes.</p>

        <div class="mt-6 grid gap-6">
          <div class="rounded-2xl border border-coldron-200 bg-coldron-100 p-5">
            <div class="text-sm font-semibold text-coldron-900">Tipo de línea <span class="text-rose-600">*</span></div>
            <div class="mt-3 grid gap-2 sm:grid-cols-4 text-sm">
              <label class="flex items-center gap-2"><input id="lineMotos" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> Motos</label>
              <label class="flex items-center gap-2"><input id="lineLivianos" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> Livianos</label>
              <label class="flex items-center gap-2"><input id="linePesados" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> Pesados</label>
              <label class="flex items-center gap-2"><input id="lineMixto" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> Mixto</label>
            </div>
            <div class="mt-2 text-xs text-coldron-700">Selecciona al menos una opción.</div>
          </div>

          <div class="grid gap-4 sm:grid-cols-2">
            <div class="rounded-2xl border border-coldron-200 p-5">
              <div class="text-sm font-semibold text-coldron-900">Modalidad de atención <span class="text-rose-600">*</span></div>
              <div class="mt-3 flex flex-wrap gap-3 text-sm">
                <label class="flex items-center gap-2"><input type="radio" name="mode" value="Orden de llegada" class="h-4 w-4"> Orden de llegada</label>
                <label class="flex items-center gap-2"><input type="radio" name="mode" value="Con agenda" class="h-4 w-4"> Con agenda</label>
              </div>

              <div class="mt-4">
                <label class="text-sm font-semibold text-coldron-900">Tiempo promedio del proceso <span class="text-rose-600">*</span></label>
                <input id="avgTime" data-required="true" data-label="Tiempo promedio del proceso"
                       class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm"
                       placeholder="Ej: 45–60 min" />
              </div>

              <div class="mt-4">
                <label class="text-sm font-semibold text-coldron-900">Link wa.me (si agenda)</label>
                <input id="waLink" class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm"
                       placeholder="https://wa.me/57..." />
              </div>
            </div>

            <div class="rounded-2xl border border-coldron-200 p-5">
              <div class="text-sm font-semibold text-coldron-900">Diferenciales (mínimo 3) <span class="text-rose-600">*</span></div>
              <p class="mt-1 text-sm text-coldron-700">Lo que los hace elegirlos.</p>
              <div id="diffWrap" class="mt-4 grid gap-2"></div>
              <button type="button"
                      class="mt-3 rounded-xl bg-coldron-900 px-3 py-2 text-sm font-semibold text-white hover:bg-coldron-950"
                      onclick="addRow('diffWrap','diff')">
                Agregar diferencial
              </button>
            </div>
          </div>

          <div class="rounded-2xl border border-coldron-200 p-5">
            <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
              <div>
                <div class="text-sm font-semibold text-coldron-900">Servicios ofrecidos <span class="text-rose-600">*</span></div>
                <p class="text-sm text-coldron-700">Mínimo 1.</p>
              </div>
              <button type="button"
                      class="rounded-xl bg-coldron-100 px-3 py-2 text-sm font-semibold text-coldron-950 hover:bg-coldron-200"
                      onclick="addRow('servicesWrap','service')">
                Agregar servicio
              </button>
            </div>
            <div id="servicesWrap" class="mt-4 grid gap-2"></div>
          </div>

          <div class="rounded-2xl border border-coldron-200 p-5">
            <div class="text-sm font-semibold text-coldron-900">Precios (si aplican)</div>
            <div class="mt-4 grid gap-3 sm:grid-cols-3">
              <div>
                <label class="text-sm font-semibold text-coldron-900">Moto</label>
                <input id="priceMoto" class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm" placeholder="$" />
              </div>
              <div>
                <label class="text-sm font-semibold text-coldron-900">Liviano</label>
                <input id="priceLiviano" class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm" placeholder="$" />
              </div>
              <div>
                <label class="text-sm font-semibold text-coldron-900">Pesado</label>
                <input id="pricePesado" class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm" placeholder="$" />
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 3) Contenido y redes -->
      <section class="rounded-3xl border border-coldron-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-bold text-coldron-950">3) Contenido y redes</h2>
        <p class="mt-1 text-sm text-coldron-700">Para vender y construir marca con consistencia.</p>

        <div class="mt-6 grid gap-4 sm:grid-cols-2">
          <div>
            <label class="text-sm font-semibold text-coldron-900">Objetivo principal <span class="text-rose-600">*</span></label>
            <select id="goal" data-required="true" data-label="Objetivo principal"
                    class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm">
              <option value="">Selecciona</option>
              <option>Ventas (WhatsApp / citas)</option>
              <option>Marca (confianza / reputación)</option>
              <option>Mixto (ventas + marca)</option>
            </select>
          </div>

          <div>
            <label class="text-sm font-semibold text-coldron-900">CTA principal <span class="text-rose-600">*</span></label>
            <select id="cta" data-required="true" data-label="CTA principal"
                    class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm">
              <option value="">Selecciona</option>
              <option>Agenda por WhatsApp</option>
              <option>Ven sin cita</option>
              <option>Ubicación</option>
              <option>Llama ahora</option>
            </select>
          </div>

          <div class="sm:col-span-2 rounded-2xl border border-coldron-200 bg-coldron-100 p-5">
            <div class="text-sm font-semibold text-coldron-900">Redes activas</div>
            <div class="mt-3 grid gap-2 sm:grid-cols-6 text-sm">
              <label class="flex items-center gap-2"><input id="netIG" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> IG</label>
              <label class="flex items-center gap-2"><input id="netTT" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> TikTok</label>
              <label class="flex items-center gap-2"><input id="netFB" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> Facebook</label>
              <label class="flex items-center gap-2"><input id="netYT" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> YouTube</label>
              <label class="flex items-center gap-2"><input id="netGB" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> Google</label>
              <label class="flex items-center gap-2"><input id="netLI" type="checkbox" class="h-4 w-4 rounded border-coldron-300"> LinkedIn</label>
            </div>

            <div class="mt-4 grid gap-3 sm:grid-cols-2">
              <div>
                <label class="text-sm font-semibold text-coldron-900">Usuario / @ (principal)</label>
                <input id="handle" class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm" placeholder="@usuario" />
              </div>
              <div>
                <label class="text-sm font-semibold text-coldron-900">Link (principal)</label>
                <input id="socialLink" class="mt-1 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm" placeholder="https://..." />
              </div>
            </div>
          </div>

          <div class="sm:col-span-2">
            <label class="text-sm font-semibold text-coldron-900">Mensajes clave (mínimo 3) <span class="text-rose-600">*</span></label>
            <div id="msgWrap" class="mt-2 grid gap-2"></div>
            <button type="button"
                    class="mt-3 rounded-xl bg-coldron-900 px-3 py-2 text-sm font-semibold text-white hover:bg-coldron-950"
                    onclick="addRow('msgWrap','msg')">
              Agregar mensaje
            </button>
          </div>
        </div>
      </section>

      <!-- 3.1) Piezas: Carruseles y contenido estático -->
      <section class="rounded-3xl border border-coldron-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-bold text-coldron-950">3.1) Prioridad de publicaciones</h2>
        <p class="mt-1 text-sm text-coldron-700">Para carruseles y piezas estáticas: ¿qué priorizan?</p>

        <div class="mt-6 grid gap-4 sm:grid-cols-2">
          <div class="rounded-2xl border border-coldron-200 p-5">
            <div class="text-sm font-semibold text-coldron-900">Carruseles: tipo de publicaciones a priorizar <span class="text-rose-600">*</span></div>
            <div class="mt-3 grid gap-2 text-sm">
              <label class="flex items-center gap-2"><input type="radio" name="carouselPriority" value="Educativo" class="h-4 w-4"> Educativo</label>
              <label class="flex items-center gap-2"><input type="radio" name="carouselPriority" value="Publicitario" class="h-4 w-4"> Publicitario</label>
              <label class="flex items-center gap-2"><input type="radio" name="carouselPriority" value="Posicionamiento" class="h-4 w-4"> Posicionamiento</label>
            </div>
          </div>

          <div class="rounded-2xl border border-coldron-200 p-5">
            <div class="text-sm font-semibold text-coldron-900">Contenido estático: tipo de publicaciones a priorizar <span class="text-rose-600">*</span></div>
            <div class="mt-3 grid gap-2 text-sm">
              <label class="flex items-center gap-2"><input type="radio" name="staticPriority" value="Educativo" class="h-4 w-4"> Educativo</label>
              <label class="flex items-center gap-2"><input type="radio" name="staticPriority" value="Publicitario" class="h-4 w-4"> Publicitario</label>
              <label class="flex items-center gap-2"><input type="radio" name="staticPriority" value="Posicionamiento" class="h-4 w-4"> Posicionamiento</label>
            </div>
          </div>

          <div class="sm:col-span-2 rounded-2xl border border-coldron-200 bg-coldron-100 p-5">
            <div class="text-sm font-semibold text-coldron-900">Notas rápidas (opcional)</div>
            <textarea id="contentNotes" class="mt-2 w-full rounded-xl border border-coldron-200 px-3 py-2 text-sm" rows="3"
                      placeholder="Ej: carruseles 2/semana con tips, estático para promos y horarios, posicionamiento para confianza y transparencia..."></textarea>
          </div>
        </div>
      </section>

      <!-- 4) Voceros y permisos -->
      <section class="rounded-3xl border border-coldron-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-bold text-coldron-950">4) Voceros y permisos de grabación</h2>
        <p class="mt-1 text-sm text-coldron-700">Quién puede salir en cámara y condiciones para grabar sin fricción.</p>

        <div class="mt-6 grid gap-6">
          <div class="rounded-2xl border border-coldron-200 p-5">
            <div class="flex flex-col gap-2
